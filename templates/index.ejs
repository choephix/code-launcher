<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DevLaunch: Project Starter</title>
    <style>
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        padding: 20px;
        background-color: #1e1e1e;
        color: #e0e0e0;
        margin: 0;
      }
      h1 {
        color: #61dafb;
        text-align: center;
        font-size: 2.5em;
        margin-bottom: 30px;
      }
      .button-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }
      .template-button {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
        background-color: #2a2a2a;
        border: none;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        transition: all 0.3s ease;
        cursor: pointer;
      }
      .template-button:hover {
        transform: translateY(-5px);
        box-shadow: 0 6px 12px rgba(97, 218, 251, 0.2);
        background-color: #333333;
      }
      .template-button img {
        width: 64px;
        height: 64px;
        margin-bottom: 15px;
      }
      .template-button span {
        text-align: center;
        font-weight: 600;
        color: #ffffff;
      }
      #result {
        background-color: #2a2a2a;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        margin-bottom: 20px;
      }
      .columns {
        display: flex;
        gap: 20px;
      }
      .column {
        flex: 1;
      }
      pre {
        background-color: #333333;
        padding: 15px;
        border-radius: 5px;
        overflow-x: auto;
        color: #e0e0e0;
      }
      h2 {
        color: #61dafb;
        border-bottom: 2px solid #61dafb;
        padding-bottom: 10px;
      }
      .action-buttons {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 30px;
      }
      .action-button {
        padding: 12px 24px;
        background-color: #61dafb;
        color: #1e1e1e;
        border: none;
        border-radius: 5px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      .action-button:hover {
        background-color: #4fa8d5;
        transform: translateY(-2px);
      }
    </style>
  </head>
  <body>
    <h1>DevLaunch: Project Starter</h1>
    <div id="templateButtons" class="button-grid">
      <!-- Template buttons will be inserted here -->
    </div>

    <div id="result">
      <!-- Results will be inserted here -->
    </div>

    <div class="action-buttons">
      <button class="action-button" onclick="runCommand('ls -la ~')">Run ls -la ~</button>
      <button class="action-button" onclick="runCustomCommand()">Run Custom Command</button>
    </div>

    <script>
      const templates = [
        {
          name: 'Empty Project',
          icon: 'https://placehold.co/64x64/EEE/31343C?font=montserrat&text=Empty',
          command:
            'mkdir -p ~/workspace/{folderName} && cd ~/workspace/{folderName} && git init && code .',
        },
        {
          name: 'Next.js App',
          icon: 'https://placehold.co/64x64/EEE/31343C?font=montserrat&text=Next.js',
          command: 'npx create-next-app ~/workspace/{folderName} && code ~/workspace/{folderName}',
        },
        {
          name: 'Vite React + TypeScript',
          icon: 'https://placehold.co/64x64/EEE/31343C?font=montserrat&text=Vite+React',
          command:
            'npm create vite@latest ~/workspace/{folderName} -- --template react-ts && cd ~/workspace/{folderName} && npm install && code .',
        },
        {
          name: 'Vite Vanilla TypeScript',
          icon: 'https://placehold.co/64x64/EEE/31343C?font=montserrat&text=Vite+TS',
          command:
            'npm create vite@latest ~/workspace/{folderName} -- --template vanilla-ts && cd ~/workspace/{folderName} && npm install && code .',
        },
        {
          name: 'Turbo Monorepo',
          icon: 'https://placehold.co/64x64/EEE/31343C?font=montserrat&text=Turbo',
          command:
            'npx create-turbo@latest ~/workspace/{folderName} && cd ~/workspace/{folderName} && code .',
        },
        {
          name: 'Pixi.js Project',
          icon: 'https://placehold.co/64x64/EEE/31343C?font=montserrat&text=Pixi.js',
          command:
            'mkdir -p ~/workspace/{folderName} && cd ~/workspace/{folderName} && npm init -y && npm install pixi.js && echo "import * as PIXI from \'pixi.js\';\n\nconst app = new PIXI.Application();\ndocument.body.appendChild(app.view);" > index.js && code .',
        },
        {
          name: 'Three.js Project',
          icon: 'https://placehold.co/64x64/EEE/31343C?font=montserrat&text=Three.js',
          command:
            'mkdir -p ~/workspace/{folderName} && cd ~/workspace/{folderName} && npm init -y && npm install three && echo "import * as THREE from \'three\';\n\nconst scene = new THREE.Scene();\nconst camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\nconst renderer = new THREE.WebGLRenderer();\nrenderer.setSize(window.innerWidth, window.innerHeight);\ndocument.body.appendChild(renderer.domElement);" > index.js && code .',
        },
        {
          name: 'Astro Project',
          icon: 'https://placehold.co/64x64/EEE/31343C?font=montserrat&text=Astro',
          command:
            'npm create astro@latest ~/workspace/{folderName} && cd ~/workspace/{folderName} && code .',
        },
      ];

      function createProjectFolder(template) {
        const folderName = prompt(`Enter the project folder name for ${template.name}:`);
        if (folderName) {
          const command = template.command.replace(/\{folderName\}/g, folderName);
          runCommand(command);
        }
      }

      function runCommand(command) {
        fetch('/run-command', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ command }),
        })
          .then(response => response.json())
          .then(data => updateResult(data));
      }

      function runCustomCommand() {
        const command = prompt('Enter the command to run:');
        if (command) {
          runCommand(command);
        }
      }

      function updateResult(data) {
        const resultDiv = document.getElementById('result');
        resultDiv.innerHTML = `
          <div class="columns">
            <div class="column">
              <h2>Command Output</h2>
              <pre>${data.commandOutput}</pre>
            </div>
            <div class="column">
              <h2>System Stats</h2>
              <p>CPU Usage: ${data.cpuUsage}%</p>
              <p>Memory Usage: ${data.memUsage}%</p>
            </div>
          </div>
        `;
      }

      function createTemplateButtons() {
        const buttonContainer = document.getElementById('templateButtons');
        templates.forEach(template => {
          const button = document.createElement('button');
          button.className = 'template-button';
          button.innerHTML = `
            <img src="${template.icon}" alt="${template.name} icon">
            <span>${template.name}</span>
          `;
          button.onclick = () => createProjectFolder(template);
          buttonContainer.appendChild(button);
        });
      }

      createTemplateButtons();
    </script>
  </body>
</html>
